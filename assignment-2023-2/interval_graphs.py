from sys import argv
from collections import deque


def lex_bfs(graph):
    # Î¦Ï„Î¹Î¬Ï‡Î½Î¿Ï…Î¼Îµ Î¼Î¯Î± Î»Î¯ÏƒÏ„Î± Î£ Î· Î¿Ï€Î¿Î¯Î± Ï€ÎµÏÎ¹Î­Ï‡ÎµÎ¹ Î­Î½Î± ÏƒÏÎ½Î¿Î»Î¿ Î¼Îµ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ ÎºÏŒÎ¼Î²Î¿Ï…Ï‚ Ï„Î¿Ï… Î³ÏÎ¬Ï†Î¿Ï…
    S = deque([set(graph.keys())])
    lex_order = []
    # ÎŒÏƒÎ¿ Î· Î»Î¯ÏƒÏ„Î± Î£ Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Î¬Î´ÎµÎ¹Î±
    while S:
        u = min(S[0])
        # Î‘Ï†Î±Î¹ÏÎ¿ÏÎ¼Îµ Î­Î½Î±Î½ ÎºÏŒÎ¼Î²Î¿ ğ‘¢ Î±Ï€ÏŒ Ï„Î¿ Ï€ÏÏÏ„Î¿ ÏƒÏÎ½Î¿Î»Î¿ Ï„Î·Ï‚ Î£
        S[0].remove(u)
        # Î ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ Ï„Î¿Î½ ğ‘¢ ÏƒÏ„Î· Î»ÎµÎ¾Î¹ÎºÎ¿Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ Î´Î¹Î¬Ï„Î±Î¾Î·
        lex_order.append(u)
        # Î‘Î½ Ï„Î¿ Ï€ÏÏÏ„Î¿ ÏƒÏÎ½Î¿Î»Î¿ Ï„Î·Ï‚ Î£ Î±Î´ÎµÎ¹Î¬ÏƒÎµÎ¹, Ï„Î¿ Î±Ï†Î±Î¹ÏÎ¿ÏÎ¼Îµ Î±Ï€ÏŒ Ï„Î· Î£
        if not S[0]:
            S.popleft()
        # Î£Ï„Î¿ SS ÏƒÏ…Î»Î»Î­Î³Î¿Ï…Î¼Îµ Ï„Î± SSn ÏƒÏ„Î± Î¿Ï€Î¿Î¯Î± ÏƒÏ…Î»Î»Î­Î³Î¿Ï…Î¼Îµ ÏŒÎ»Î¿Ï…Ï‚ Ï„Î¿Ï…Ï‚ Î³ÎµÎ¯Ï„Î¿Î½ÎµÏ‚ Ï„Î¿Ï… ğ‘¢ Ï€Î¿Ï… Î±Î½Î®ÎºÎ¿Ï…Î½ ÏƒÏ„Î± Î£ğ‘£
        SS = {i: set() for i in range(len(S))}
        # Î“Î¹Î± ÎºÎ¬Î¸Îµ Î­Î½Î±Î½ Î³ÎµÎ¯Ï„Î¿Î½Î± ğ‘£ Ï„Î¿Ï… ğ‘¢
        for v in graph[u]:
            # Ï€Î¿Ï… Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î¼Îµ ÎµÏ€Î¹ÏƒÎºÎµÏ†Ï„ÎµÎ¯ Î±ÎºÏŒÎ¼Î±
            if v not in lex_order:
                for Sn, SSn in zip(S, SS.values()):
                    # ÎˆÏƒÏ„Ï‰ ÏŒÏ„Î¹ Sn ÎµÎ¯Î½Î±Î¹ Ï„Î¿ ÏƒÏÎ½Î¿Î»Î¿ ÏƒÏ„Î¿ Î¿Ï€Î¿Î¯Î¿ Î±Î½Î®ÎºÎµÎ¹ Î¿ ğ‘£
                    if v in Sn:
                        # Î‘Ï†Î±Î¹ÏÎ¿ÏÎ¼Îµ Ï„Î¿Î½ ğ‘£ Î±Ï€ÏŒ Ï„Î¿ Sn
                        Sn.remove(v)
                        # Î¤Î¿Î½ Ï€ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ ÏƒÏ„Î¿ ÏƒÏÎ½Î¿Î»Î¿ SSn
                        SSn.add(v)
                        # Î‘Î½ Ï„Î¿ Sn Î¬Î´ÎµÎ¹Î±ÏƒÎµ, Ï„Î¿ Î±Ï†Î±Î¹ÏÎ¿ÏÎ¼Îµ Î±Ï€Î¿ Ï„Î· Î£
                        if not Sn:
                            S.remove(Sn)
                        break
        # Î•Î¹ÏƒÎ¬Î³Î¿Ï…Î¼Îµ Ï„Î± SSns Ï€ÏÎ¹Î½ Î±Ï€ÏŒ Ï„Î± Sns ÏƒÏ„Î· Î£
        for n, SSn in sorted(SS.items(), reverse=True):
            # Î•Î¹ÏƒÎ¬Î³Î¿Ï…Î¼Îµ Î¼ÏŒÎ½Î¿ Ï„Î± Î¼Î· ÎºÎµÎ½Î¬(Î±Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¯Î·Ï„Î±) SSns
            if SSn:
                S.insert(n, SSn)
    # Î•Ï€Î¹ÏƒÏ„ÏÎ­Ï†Î¿Ï…Î¼Îµ Ï„Î· Î»ÎµÎ¾Î¹ÎºÎ¿Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ ÏƒÎµÎ¹ÏÎ¬ Î¼Îµ Ï„Î·Î½ Î¿Ï€Î¿Î¯Î± ÎµÏ€Î¹ÏƒÎºÎµÏ†Ï„Î®ÎºÎ±Î¼Îµ Ï„Î¿Ï…Ï‚ ÎºÏŒÎ¼Î²Î¿Ï…Ï‚
    return lex_order


def is_chordal(graph):
    # Î‘Î½Ï„Î¯ÏƒÏ„ÏÎ¿Ï†Î· Î»ÎµÎ¾Î¹ÎºÎ¿Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ Î´Î¹Î¬Ï„Î±Î¾Î·
    reverse_lex_order = lex_bfs(graph)[::-1]
    # Î“Î¹Î± ÎºÎ¬Î¸Îµ ÎºÏŒÎ¼Î²Î¿ ğ‘¢ ÏƒÎµ Î±Î½Ï„Î¯ÏƒÏ„ÏÎ¿Ï†Î· Î»ÎµÎ¾Î¹ÎºÎ¿Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ Î´Î¹Î¬Ï„Î±Î¾Î·
    for u in reverse_lex_order:
        # ÎˆÏƒÏ„Ï‰ RN(ğ‘¢) Î¿Î¹ Î³ÎµÎ¯Ï„Î¿Î½ÎµÏ‚ Ï„Î¿Ï… ğ‘¢ Ï€Î¿Ï… Î­Ï€Î¿Î½Ï„Î±Î¹ Ï„Î¿Ï… ğ‘¢ ÏƒÏ„Î·Î½ Î±Î½Ï„Î¯ÏƒÏ„ÏÎ¿Ï†Î· Î»ÎµÎ¾Î¹ÎºÎ¿Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ Î´Î¹Î¬Ï„Î±Î¾Î·
        RNu = {i for i in graph[u] if reverse_lex_order.index(i) > reverse_lex_order.index(u)}
        if RNu:
            # ÎˆÏƒÏ„Ï‰ ğ‘£ Î¿ Ï€ÏÏÏ„Î¿Ï‚ Î³ÎµÎ¯Ï„Î¿Î½Î±Ï‚ Ï„Î¿Ï… ğ‘¢ ÏƒÏ„Î·Î½ Î±Î½Ï„Î¯ÏƒÏ„ÏÎ¿Ï†Î· Î»ÎµÎ¾Î¹ÎºÎ¿Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ Î´Î¹Î¬Ï„Î±Î¾Î·
            v = min(RNu, key=reverse_lex_order.index)
            # RN(ğ‘£) Î¿Î¹ Î³ÎµÎ¯Ï„Î¿Î½ÎµÏ‚ Ï„Î¿Ï… ğ‘£ Ï€Î¿Ï… Î­Ï€Î¿Î½Ï„Î±Î¹ Ï„Î¿Ï… ğ‘£ ÏƒÏ„Î·Î½ Î±Î½Ï„Î¯ÏƒÏ„ÏÎ¿Ï†Î· Î»ÎµÎ¾Î¹ÎºÎ¿Î³ÏÎ±Ï†Î¹ÎºÎ® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ Î´Î¹Î¬Ï„Î±Î¾Î·.
            RNv = {j for j in graph[v] if reverse_lex_order.index(j) > reverse_lex_order.index(v)}
            # Î‘Î½ RÎ(ğ‘¢) â§µ {ğ‘£} âŠˆ RN(ğ‘£), Ï„ÏŒÏ„Îµ Î¿ Î³ÏÎ¬Ï†Î¿Ï‚ Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Ï‡Î¿ÏÎ´Î¹ÎºÏŒÏ‚, ÎºÎ±Î¹ ÏƒÏ„Î±Î¼Î±Ï„Î¬Î¼Îµ
            if not (RNu - {v}).issubset(RNv):
                return False
    return True


def connected_component(graph, u, v):
    # Î‘Ï†Î±Î¹ÏÎ¿ÏÎ¼Îµ ÎºÎ¬Î¸Îµ Î­Î½Î±Î½ ÎºÏŒÎ¼Î²Î¿ ğ‘¢ ÎºÎ±Î¹ Ï„Î¿Ï…Ï‚ Î³ÎµÎ¯Ï„Î¿Î½ÎµÏ‚ Ï„Î¿Ï… Î±Ï€ÏŒ Ï„Î¿Î½ G
    g_nu = {node: (v - {u} - graph[u]) for node, v in graph.items() if node != u}
    queue, visited = deque([v]), set()
    visited.add(v)
    # Î’ÏÎ¯ÏƒÎºÎ¿Ï…Î¼Îµ, Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ Ï„Î·Î½ Î±Ï€Î»Î® ÎºÎ±Ï„Î¬ Ï€Î»Î¬Ï„Î¿Ï‚ Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·, Ï„Î¹Ï‚ ÏƒÏ…Î½Î¹ÏƒÏ„ÏÏƒÎµÏ‚ Ï€Î¿Ï… Ï€ÏÎ¿ÎºÏÏ€Ï„Î¿Ï…Î½ Î±Ï€ÏŒ Ï„Î¿Î½ ğº â§µ ğ‘ (ğ‘¢)
    while queue:
        node = queue.popleft()
        for neighbor in g_nu[node]:
            if neighbor not in visited:
                queue.append(neighbor)
                visited.add(neighbor)
    return visited


def is_asteroidal_triple_free(graph):
    # Î‘ÏÏ‡Î¹ÎºÎ¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Î­Î½Î±Î½ Ï€Î¯Î½Î±ÎºÎ± ğ¶ Î´Î¹Î±ÏƒÏ„Î¬ÏƒÎµÏ‰Î½ |ğ‘‰|Ã—|ğ‘‰|
    C = [[0 for i in range(len(graph))] for i in range(len(graph))]
    # ÏŒÏ€Î¿Ï… ÏƒÏ„Î¿ ÎºÎµÎ»Î¯ ğ‘¢, ğ‘£ Ï„Î¿Ï… ğ¶
    for u in graph:
        for v in graph:
            # Î²Î¬Î¶Î¿Ï…Î¼Îµ Ï„Î· ÏƒÏ…Î½Î¹ÏƒÏ„ÏÏƒÎ± Ï„Î¿Ï… ğº â§µ ğ‘ (ğ‘¢) ÏƒÏ„Î·Î½ Î¿Ï€Î¿Î¯Î± Î±Î½Î®ÎºÎµÎ¹ Î¿ ÎºÏŒÎ¼Î²Î¿Ï‚ ğ‘£ Î±Î½ Î¿Î¹ ÎºÏŒÎ¼Î²Î¿Î¹ ğ‘¢ ÎºÎ±Î¹ ğ‘£ Î´ÎµÎ½ ÎµÎ¯Î½Î±Î¹ Î³ÎµÎ¯Ï„Î¿Î½ÎµÏ‚
            if v not in graph[u] and u != v:
                C[u][v] = connected_component(graph, u, v)
    # Î“Î¹Î± Î½Î± Î¼Î·Î½ Î­Ï‡ÎµÎ¹ Î¿ Î³ÏÎ¬Ï†Î¿Ï‚ Î±ÏƒÏ„ÎµÏÎ¿ÎµÎ¹Î´ÎµÎ¯Ï‚ Ï„ÏÎ¹Ï€Î»Î­Ï„ÎµÏ‚, Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î³Î¹Î± ÎºÎ±Î¼Î¯Î± Ï„ÏÎ¹Ï€Î»Î­Ï„Î± ğ‘¢, ğ‘£, ğ‘¤
    for u in range(len(C)):
        for v in range(u + 1, len(C)):
            for w in range(v + 1, len(C)):
                # Î­Î»ÎµÎ³Ï‡Î¿Ï‚ Î¼ÏŒÎ½Î¿ Î¼Î· Î¼Î·Î´ÎµÎ½Î¹ÎºÏÎ½ ÎºÎµÎ»Î¹ÏÎ½
                if all(c != 0 for c in [C[u][v], C[u][w], C[w][v]]):
                    # Î½Î± Î¼Î·Î½ Î¹ÏƒÏ‡ÏÎµÎ¹ ğ¶[ğ‘¢, ğ‘£] = ğ¶[ğ‘¢, ğ‘¤], ğ¶[ğ‘£, ğ‘¢] = ğ¶[ğ‘£, ğ‘¤], ğ¶[ğ‘¤, ğ‘¢] = ğ¶[ğ‘¤, ğ‘£]
                    if C[u][v] == C[u][w] and C[v][u] == C[v][w] and C[w][u] == C[w][v]:
                        return False
    return True


if __name__ == '__main__':
    graph_ = {}
    with open(argv[2], 'r') as file:
        for line in file:
            v, e = map(int, line.strip().split())
            graph_.setdefault(v, set()).add(e)
            graph_.setdefault(e, set()).add(v)

    if argv[1] == "lexbfs":
        print(lex_bfs(graph_))
    elif argv[1] == "chordal":
        print(is_chordal(graph_))
    elif argv[1] == "interval":
        print(is_chordal(graph_) and is_asteroidal_triple_free(graph_))
